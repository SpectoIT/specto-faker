"use strict";var specto_faker={initiated:!1,config:{object_selector:".faker",open_class:"open",init_class:"faker-init",anim_class:"faker-animated",anim_progress_class:"faker-animating",focused_class:"faker-focused",key_events_class:"faker-keyevent",searchable_class:"faker-search",select_single:"faker-sel-single",braille_class:"faker-braille",selected_val_class:"active",disabled_val_class:"rel-disabled",search_hidden:"rel-search",animated:!1,animation_speed:400,count_selected:!1,count_disables:!0,key_events:!1,searchable:!0,search_single:!0,sortable:!1,sort_ascending:!0,before_change:function(e,s){return e},on_change:null,on_init:null,braille_support:!1},init:function(e){var s=$.extend({},specto_faker.config,e&&"object"==typeof e?e:{}),a=[];return specto_faker.initiated||(specto_faker.config.init_class=s.init_class,specto_faker.config.open_class=s.open_class,specto_faker.config.anim_class=s.anim_class,specto_faker.config.anim_progress_class=s.anim_progress_class,specto_faker.config.focused_class=s.focused_class,specto_faker.config.selected_val_class=s.selected_val_class,specto_faker.config.disabled_val_class=s.disabled_val_class,specto_faker.config.key_events_class=s.key_events_class,specto_faker.config.searchable_class=s.searchable_class,specto_faker.config.select_single=s.select_single,specto_faker.config.braille_class=s.braille_class,specto_faker.config.search_hidden=s.search_hidden,specto_faker.config.count_selected=s.count_selected,specto_faker.config.count_disables=s.count_disables),$(s.object_selector).each(function(){var e=specto_faker.getTargetelement(this),t=!1;if(a.push(e),s.sortable&&specto_faker.sortValues(e,s.sort_ascending),$(e).find(".drop-value, .drop-handle").each(function(){$(this).off().click(function(){var e=$(this).parent();specto_faker.isFakerOpen(e)?specto_faker.animateFaker(e):specto_faker.animateFaker(e,"openme")})}),specto_faker.fakerSelection(e,s.on_change,s.before_change),$(e).find(".drop-value span").text()||($(e).find(".drop-selection > div[selected]").length?specto_faker.updateValue($(e).find(".drop-selection > div[selected]").first().addClass(specto_faker.config.selected_val_class),"noclick"):specto_faker.updateValue($(e).find(".drop-selection > div").first(),"noclick")),$(e).find("select").each(function(){t=!0,$(this).removeClass("faker").off("focus").focus(function(){specto_faker.isFakerOpen(e)||($("."+specto_faker.config.init_class+"."+specto_faker.config.open_class).each(function(){specto_faker.animateFaker(this)}),specto_faker.animateFaker($(this).parent().addClass(specto_faker.config.focused_class),"openme"))}),s.searchable&&s.key_events||$(this).off("blur").blur(function(){specto_faker.animateFaker($(this).parent().removeClass(specto_faker.config.focused_class))})}),!t&&$(e).find(".non-visual-helper").length<1&&($(e).prepend("<input class='non-visual-helper' name='non-visual-helper' />"),$(e).find(".non-visual-helper").each(function(){$(this).focus(function(){$("."+specto_faker.config.init_class+"."+specto_faker.config.open_class).each(function(){specto_faker.animateFaker(this)}),specto_faker.animateFaker($(this).parent().addClass(specto_faker.config.focused_class),"openme"),$(this).attr("title","combo box "+specto_faker.getFakerUserValue(e)+" expanded"),specto_faker.brailleSpeach(e,"selection")}),s.searchable&&s.key_events||$(this).off("blur").blur(function(){specto_faker.animateFaker($(this).parent().removeClass(specto_faker.config.focused_class))})})),s.animated?$(e).addClass(specto_faker.config.anim_class):$(e).removeClass(specto_faker.config.anim_class),s.braille_support?($(e).addClass(specto_faker.config.braille_class).attr("title","combobox"),s.key_events=!0):$(e).removeClass(specto_faker.config.braille_class),s.key_events?$(e).addClass(specto_faker.config.key_events_class):$(e).removeClass(specto_faker.config.key_events_class),s.searchable&&s.key_events?($(e).addClass(specto_faker.config.searchable_class),s.search_single&&$(e).addClass(specto_faker.config.select_single)):$(e).removeClass(specto_faker.config.searchable_class),$(e).addClass(specto_faker.config.init_class),t&&$(e).parents("form").length>0)switch(document.readyState){case"complete":$(e).parentsUntil("form").last().parent()[0].reset();break;default:$(window).load(function(){$(e).parentsUntil("form").last().parent()[0].reset()})}}),specto_faker.initiated||($(document).mouseup(function(e){$("."+specto_faker.config.init_class+"."+specto_faker.config.open_class).each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||specto_faker.animateFaker(this)})}),$(document).on("keyup",function(e){$("."+specto_faker.config.init_class+"."+specto_faker.config.key_events_class+"."+specto_faker.config.open_class).each(function(){specto_faker.keyEvents(this,e)})})),specto_faker.config.animation_speed=s.animation_speed,specto_faker.initiated=!0,s.on_init&&s.on_init(a),a},fakerSelection:function(e,s,a){$(e).find(".drop-selection div").each(function(){$(this).off().click(function(t){if("string"!=typeof $(this).attr("disabled")){if(a&&!a(specto_faker.getSelectionValue(this),t))return t.preventDefault(),void t.stopPropagation();$(this).siblings().filter(function(){return $(this).hasClass(specto_faker.config.selected_val_class)}).each(function(){$(this).removeClass(specto_faker.config.selected_val_class)}),specto_faker.updateValue(this);var c=this;setTimeout(function(){$(c).addClass(specto_faker.config.selected_val_class)},specto_faker.isFakerAnimated(e)?specto_faker.config.animation_speed:0),s&&s(specto_faker.getSelectionValue(this),t)}})})},updateValue:function(e,s){if(!($(e).length<1)){$(e).siblings().filter(function(){return $(this).hasClass(specto_faker.config.selected_val_class)}).each(function(){$(this).removeClass(specto_faker.config.selected_val_class)}),$(e).addClass(specto_faker.config.selected_val_class);var a=$(e).parent().prevAll(".drop-value").attr("rel",$(e).attr("rel")).find("span").text($(e).text()),t=$(e).parent().prevAll("select");t.length>0&&$(t).val(specto_faker.getSelectionValue(e)).change(),s||$(a).trigger("click"),specto_faker.isFakerBrailleSupport($(e).parent().parent())&&specto_faker.brailleSpeach($(e).parent().parent(),"selection")}},getFakerValue:function(e){return $(e).find(".drop-value").attr("rel")},getFakerUserValue:function(e){return $(e).find(".drop-value span").text()},setFakerValue:function(e,s,a){specto_faker.updateValue($(e).find(".drop-selection div[rel='"+s+"']"),a)},getSelectionValue:function(e){return $(e).attr("rel")},isFakerOpen:function(e){return $(e).hasClass(specto_faker.config.open_class)},isFakerAnimated:function(e){return $(e).hasClass(specto_faker.config.anim_class)},isFakerSearchable:function(e){return $(e).hasClass(specto_faker.config.searchable_class)},isFakerBrailleSupport:function(e){return $(e).hasClass(specto_faker.config.braille_class)},animateFaker:function(e,s){if(specto_faker.isFakerAnimated(e)){if($(e).hasClass(specto_faker.config.anim_progress_class))return;if($(e).addClass(specto_faker.config.anim_progress_class),s){specto_faker.makeFakerSearchable(e);var a=$(e).find(".drop-selection").css({visibility:"hidden",opacity:"1"}),t="div";specto_faker.config.count_selected&&(t+=":not(."+specto_faker.config.selected_val_class+")"),specto_faker.config.count_disables&&(t+=":not(."+specto_faker.config.disabled_val_class+")"),$(a).css({height:"0px",visibility:"visible"}).animate({height:$(a).find("div").first().height()*$(a).find(t).length+"px"},{duration:specto_faker.config.animation_speed,always:function(){$(a).removeAttr("style"),$(e).addClass(specto_faker.config.open_class),$(e).removeClass(specto_faker.config.anim_progress_class)}})}else{specto_faker.removeFakerSearchable(e);a=$(e).find(".drop-selection");$(a).css({height:$(a).height()+"px"}).animate({height:"0px"},{duration:specto_faker.config.animation_speed,always:function(){$(a).removeAttr("style"),$(e).removeClass(specto_faker.config.open_class).removeClass(specto_faker.config.anim_progress_class)}}),specto_faker.isFakerBrailleSupport(e)&&specto_faker.brailleSpeach(e,"close")}}else s?($(e).addClass(specto_faker.config.open_class),specto_faker.makeFakerSearchable(e,"focus_me")):($(e).removeClass(specto_faker.config.open_class),specto_faker.removeFakerSearchable(e),specto_faker.isFakerBrailleSupport(e)&&specto_faker.brailleSpeach(e,"close"))},getTargetelement:function(e){if("SELECT"===$(e).prop("tagName")){if($(e).parent().hasClass(specto_faker.config.init_class))return $(e).parent();var s=$(e).attr("placeholder"),a=$("<div class='faker'><div class='drop-value'><span></span></div><div class='drop-handle'>&nbsp;</div><div class='drop-selection'></div></div>");$(e).find("option").each(function(){var e=$(this).text(),t="string"==typeof $(this).attr("selected");t&&(s=""),$(a).find(".drop-selection").append("<div rel='"+($(this).attr("value")||e)+"'"+("string"==typeof $(this).attr("disabled")?" disabled='disabled' class='"+specto_faker.config.disabled_val_class+"'":"")+(t?" selected='selected'":"")+">"+e+"</div>")}),$(a).prepend($(e).clone(!0)),s&&($(a).find(".drop-value span").text(s),$(a).find(".drop-selection").prepend("<div rel='' disabled='disabled' class='"+specto_faker.config.disabled_val_class+"'>"+s+"</div>"),$(a).find("option[value='']").length<1&&$(a).find("select").prepend("<option value='' selected='selected' disabled='disabled'>placeholder</option>")),$(e).after(a);var t=$(e).next();return $(e).remove(),t}return e},updateOptions:function(e,s,a,t,c){$(e).each(function(){$(this).find(".drop-value span").each(function(){$(this).text("")}),$(this).find(".drop-selection").each(function(){$(this).empty();var e="";$.each(s,function(s,c){e+="<div rel='"+c[a||"rel"]+"' "+(c.is_default?"selected":"")+">"+c[t||"name"]+"</div>"}),$(this).append(e)}),$(e).find("select").each(function(){$(this).empty();var e="";$.each(s,function(s,c){e+="<option value='"+c[a||"rel"]+"'>"+c[t||"name"]+"</option>"}),$(this).append(e)}),$(this).specto_faker(c)})},keyEvents:function(e,s){if(specto_faker.isFakerOpen(e)){var a=s.keyCode||s.which;switch(a){case 13:$(e).find(".drop-value").trigger("click");break;case 40:specto_faker.selection.next(e);break;case 38:specto_faker.selection.previous(e);break;default:if(specto_faker.isFakerSearchable(e))specto_faker.filterBySearchInput(e);else{var t=String.fromCharCode(a);t.search(/[a-zA-Z0-9\.\-]/)>-1&&specto_faker.selection.tochar(e,t.toLowerCase())}}}},selection:{filter_fn:function(){return!$(this).hasClass(specto_faker.config.disabled_val_class)&&!$(this).hasClass(specto_faker.config.search_hidden)},next:function(e){var s=!1;$(e).find(".drop-selection div."+specto_faker.config.selected_val_class).first().each(function(){if(s=!0,$(this).nextAll().filter(specto_faker.selection.filter_fn).length>0)specto_faker.updateValue($(this).nextAll().filter(specto_faker.selection.filter_fn).first(),"noclick");else{var e=$(this).prevAll().filter(specto_faker.selection.filter_fn);e.length>0&&specto_faker.updateValue(e.last(),"noclick")}}),s||specto_faker.updateValue($(e).find(".drop-selection div").filter(specto_faker.selection.filter_fn).first(),"noclick")},previous:function(e){var s=!1;$(e).find(".drop-selection div."+specto_faker.config.selected_val_class).first().each(function(){if(s=!0,$(this).prevAll().filter(specto_faker.selection.filter_fn).length>0)specto_faker.updateValue($(this).prevAll().filter(specto_faker.selection.filter_fn).first(),"noclick");else{var e=$(this).nextAll().filter(specto_faker.selection.filter_fn);e.length>0&&specto_faker.updateValue(e.last(),"noclick")}}),s||specto_faker.updateValue($(e).find(".drop-selection div").filter(specto_faker.selection.filter_fn).last(),"noclick")},tochar:function(e,s){var a=!1;$(e).find(".drop-selection div."+specto_faker.config.selected_val_class).first().each(function(){$(this).text().slice(0,1).toLowerCase()==s&&(a=!0)}),a?$(e).find(".drop-selection div."+specto_faker.config.selected_val_class).first().each(function(){var e=$(this).nextAll().filter(function(){return $(this).text().slice(0,1).toLowerCase()==s&&!$(this).hasClass(specto_faker.config.search_hidden)});e.length<1?a=!1:specto_faker.updateValue(e.first(),"noclick")}):$(e).find(".drop-selection div").filter(function(){return $(this).text().slice(0,1).toLowerCase()==s&&!$(this).hasClass(specto_faker.config.search_hidden)}).first().each(function(){specto_faker.updateValue(this,"noclick")})}},makeFakerSearchable:function(e,s){specto_faker.isFakerSearchable(e)&&($(e).find(".drop-value").append("<input autocomplete='nope' type='text' name='faker-search' class='form-control' title='combobox expanded' />"),$(e).find("input[name='faker-search']").each(function(){$(this).click(function(e){e.preventDefault(),e.stopPropagation()}),$(this).on("keydown",function(e){9===(e.keyCode||e.which)&&specto_faker.animateFaker($(this).parent().parent().removeClass(specto_faker.config.focused_class))}),$(this).focus()}))},removeFakerSearchable:function(e){specto_faker.isFakerSearchable(e)&&($(e).find("input[name='faker-search']").each(function(){$(this).remove()}),$(e).find(".drop-selection div."+specto_faker.config.search_hidden).each(function(){$(this).removeClass(specto_faker.config.search_hidden)})),specto_faker.isFakerBrailleSupport(e)&&specto_faker.brailleSpeach(e,"close")},filterBySearchInput:function(e){var s=$(e).find("input[name='faker-search']").val();s&&(s=s.toLowerCase());var a=0;$(e).find(".drop-selection div").each(function(){$(this).text().toLowerCase().search(s)>-1?($(this).removeClass(specto_faker.config.search_hidden),a++):$(this).addClass(specto_faker.config.search_hidden)}),1===a&&$(e).hasClass(specto_faker.config.select_single)&&$(e).find(".drop-selection div:not(."+specto_faker.config.search_hidden+")").first().each(function(){$(this).hasClass(specto_faker.config.selected_val_class)||specto_faker.updateValue(this,"noclick")})},selectLastSelected:function(){},sortValues:function(e,s){var a=[];return $(e).find(".drop-selection div:not(."+specto_faker.config.disabled_val_class+")").each(function(e){a.push({rel:$(this).attr("rel"),val:$(this).text(),i:e})}),a.sort(function(e,a){return e.val.localeCompare(a.val)*(s?1:-1)}),$.each(a,function(s,a){$(e).find(".drop-selection").append($(e).find(".drop-selection div:not(."+specto_faker.config.disabled_val_class+")").eq(a.i).clone().addClass("tmp"))}),$.each(a,function(s,a){$(e).find(".drop-selection div:not(."+specto_faker.config.disabled_val_class+"):not(.tmp)").each(function(){$(this).remove()})}),$(e).find(".drop-selection div.tmp").each(function(){$(this).removeClass("tmp")}),!0},brailleSpeach:function(e,s,a){switch(s){case"open":$(document.activeElement).attr("title","expanded");break;case"selection":var t=specto_faker.getFakerUserValue(e)+" "+($(e).find(".drop-selection div."+specto_faker.config.selected_val_class).prevAll().filter(specto_faker.selection.filter_fn).length+1)+" of "+$(e).find(".drop-selection div").filter(specto_faker.selection.filter_fn).length;$(e).find(".non-visual-helper").length>0?$(e).find(".non-visual-helper").val(t):$(document.activeElement).attr("title",t);break;case"close":$(document.activeElement).attr("title","combo box "+specto_faker.getFakerUserValue(e)+" collapsed")}}};!function(e){e.fn.specto_faker=function(s){return specto_faker.init(e.extend(s,{object_selector:this}))}}(jQuery);